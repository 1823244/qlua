Монитор рынка по сигналам прорыва ценового канала. Что это. Это когда инструмент долго ходит в границах (наш канал), а потом из него вылетает. Это и есть сигнал. На младших таймфреймах - это может быть простым шумом. Но когда начинают выстраиваться сигналы на следующих интервалах, то это жжж неспроста. Сигналы строятся по алгоритму NRTR (смотрим индикатор StepNRTR и выбираем оптимальные настройки).
Поэтому написал окно-таблицу где загружен список инструментов. В цикле по указанным интервалам происходит пересчет данных. Выводятся значения. Если есть сигнал, то выводится сообщени и проигрывается мелодия.
http://funkyimg.com/i/2Ct18.png
Что у нас здесь. Бумаги из фала настроек. Далее последняя цена, % изменения с открытия, цена открытия, дельта от открытия, дневной ATR, размер позиции (то, что куплено), уровни ценового канала для каждого интервала (они естественно разные). Далее идут колонки для торговли. Зачем я их сделал - не знаю. Решил.
Цена - цена выставления заявки, 0 - по рынку. Далее размер позиции и кнопки управления ей. Далее команды на покупку и продажу. Последняя команда - закрыть все. Она появляется, если у Вас позиция <> 0. Она совершается по рынку.
Для предотвращения случайностей все команды совершаются двойным кликом мышки. Чтобы очистить цену высталения позиции достаточно нажать в выбранной строке Backspace. Если надо ввести конкретную цену, то можно выбрать цену открытия или текущую, кликнув (дважды) по соотвествующей колонке. Или дважды кликнуть по цене позиции или по размеру позиции и появится окно ввода. В нем надо вырать строку и ввести цифры. Очистка тоже Backspace.
Главное - сделки совершаете на свой страх и риск. Я тестировал пару дней торговлю на тестовом сервере. Но мог чего-то пропустить. Поэтому вступайте в клуб тестеров.
http://funkyimg.com/i/2Ct2A.png
http://funkyimg.com/i/2Ct2L.png
Теперь как все это заставить лететь:
Скрипт кладем в папку LuaIndicators там где установлен Квик.
Далее надо создать еще две папки
http://funkyimg.com/i/2Ct2F.png
В папку RobotParams надо положить файл scriptMonitor.csv. В этом файле как раз и находится список бумаг для монитора, с указанием дополнительных настроек.
http://funkyimg.com/i/2Ct34.png
Чтобы проигрывался звук, надо положить библиотеку w32.dll в корневую папку Квика, либо отключайте в скрипте и в настройках.
Далее, для торговли надо в самом скрипте указать ваши данные от брокера - счет, код клиента.
http://funkyimg.com/i/2Ct3D.png
Если Вы хотите сменить настройки хранения лога и файла параметров то здесь:
http://funkyimg.com/i/2Ct3F.png
Настройки алгоритма:
http://funkyimg.com/i/2Ct3E.png
Теперь особенности. Т.к. скрипт тянет данные напрямую от брокера, то в Квике должен быть разрешен вывод данных по списку бумаг. Далее, для быстроты получения данных, лучше, чтобы был открыт график инструмента.
У меня открыты графики для списка бумаг. Если графика нет, то Квик данные не получает с сервера - оптимизация трафика. Поэтому заставить их получить - процедура не быстрая. Я запускаю монитор с утра, к 10.15 (когда проходит обновления первый раз) уже даные вытягиваются. Надо просто подождать.
Ну и главное - у меня список из 44 бумаг. Памяти у меня на сервере 16 гб. Мне хватает. Но кому-то может и не хватит.
Закрывается скрипт простым закрытием окна, либо через список скриптов Квика. Закрытие не быстрое, т.к. идет очистка загруженных данных в памяти.
